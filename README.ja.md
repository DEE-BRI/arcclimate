# ArcClimate

ArcClimate（以下、「AC」という）は、建物の熱負荷の推計に必要な気温、湿度、水平面全天日射、下向き大気放射、風向・風速について、気象庁が作成しているメソスケールの数値予報モデル（以下、「MSM」という）を基に、標高補正や空間補間によって指定した任意の地点の設計用気象データセットを作成するプログラムです。

ACでは、あらかじめ計算しクラウド上に保存されているデータ（以下、「基本データセット」という）から、指定した任意の地点の作成に必要なデータを自動でダウンロードし、それらを空間補間計算することで、任意の地点の設計用気象データセットを作成しています。

![ArcClimate 気象データの作成の流れ](flow.png "ArcClimate 気象データの作成の流れ")

作成可能な領域は日本の国土のほぼ全域(注1)を含む北緯 22.4～47.6°、東経 120～150°の範囲で、作成されるデータの時間間隔は 1 時間別の値です。また、作成可能な期間は日本時間で 2011年1月1日から2020年12月31日までの10年間です。10年分のデータまたは 10年分のデータから作成した拡張アメダス方式（以下、「EA 方式」という）の 1年間分の標準年データを取得することができます。

注1…沖ノ鳥島（最南端 北緯 20.42°東経 136.07°）や南鳥島（最東端 北緯 24.28 東経 153.99）等の離島が含まれません。また、周囲がほぼ海（標高が0m 未満）の場合には計算できない地点があります。

*Read this in other languages: [English](README.md), [日本語](README.ja.md).*

## 利用環境 

[Python](htts://www.python.org/) 3.8 を想定しています。
また、Quick Startでは、 Ubuntuでの利用を想定していますが、Windows上でも動作します。Windowsで利用する場合等、コマンドが一部異なります。例えば、`python3`ではなく`python`であったり、 `pip3`でなく`pip`であることがあります。利用環境に応じて読み変えてください。


## Quick Start

以下のコマンドを実行すると、指定された緯度経度地点の標準年気象データファイルを生成します。

```
$ pip3 install git+https://github.com/DEE-BRI/arcclimate.git
$ arcclimate 36.1290111 140.0754174 -o kenken_EA.csv --mode EA 
```

日本国内の任意の経度緯度を指定できます。
任意地点の緯度経度はGoogleMap等で取得することができます。
例えば、国立研究開発法人 建築研究所をGoogleMapで検索すると、URLが
`https://www.google.co.jp/maps/place/国立研究開発法人建築研究/@36.1290111,140.0754174....` の様になります。
このURLのうち、36.1290111が緯度、140.0754174が経度です。

コマンドラインで取得した緯度経度情報を入力して、プログラムを実行します。
```
$ arcclimate 36.1290111 140.0754174 -o weather.csv
```

必要なデータをネットワークから取得したのち補正処理が実行されます。
結果は `weather.csv` に保存されます。


詳しくは [説明資料](ArcClimate気象データの説明_20220210.pdf)の「1.1 ArcClimateの使用方法」を参照してください。


## 出力されるCSV項目

1. date ... 参照時刻。日本標準時JST。ただし、平均年の場合は1970年と表示されます。
2. TMP ... 参照時刻時点の気温の瞬時値 (単位:℃)
3. MR ...参照時刻時点の重量絶対湿度の瞬時値 (単位:g/kgDA)
4. DSWRF_est ... 参照時刻の前1時間の推定日射量の積算値 (単位:MJ/m2)
5. DSWRF_msm ... 参照時刻の前1時間の日射量の積算値 (単位:MJ/m2)
6. Ld ... 参照時刻の前1時間の下向き大気放射量の積算値 (単位:MJ/m2)
7. VGRD ... 南北風(V軸) (単位:m/s)
8. UGRD ... 東西風(U軸) (単位:m/s)
9. PRES ... 気圧 (単位:hPa)
10. APCP01 ... 参照時刻の前1時間の降水量の積算値 (単位:mm/h)
11. w_spd ... 参照時刻時点の風速の瞬時値 (単位:m/s)
12. w_dir ... 参照時刻時点の風向の瞬時値 (単位:°)

詳しくは [説明資料](ArcClimate気象データの説明_20220210.pdf)の「1.2 出力データの形式」を参照してください。

[HASP](https://www.jabmee.or.jp/hasp/)用の気象データ(.has)を出力することもできます。
出力するHASP用気象データには、外気温(単位:℃)、絶対湿度(単位:g/kgDA)、風向(16方位)、風速(単位:m/s)のみ値が反映されます。
法線面直達日射量、水平面天空日射量、水平面夜間日射量については0が出力されます。

[EnergyPlus](https://energyplus.net/)用の気象データ(.epw)を出力することもできます。
ただし、外気温(単位:℃)、風向(単位:°)、風速(単位:m/s)、降水量の積算値(単位:mm/h)のみを出力します。

HASPまたはEnergyPlus用の気象データを生成する際には、`-f HAS` または `-f EPW`のようにコマンドラインオプションを追加してください。

## 計算アルゴリズム

 [説明資料](ArcClimate気象データの説明_20220210.pdf)の「2. 基本データセットの概要」および「3. 空間補間計算の概要」を参照してください。


## 著者

ArcClimate Development Team

## ライセンス

Distributed under the MIT License. See [LICENSE](LICENSE.txt) for more information.

## 謝辞

建築基準整備促進事業E12「エネルギー消費性能の評価の前提となる気候条件の詳細化に向けた検討」の
成果物である構築手法をプログラム化したものです。


